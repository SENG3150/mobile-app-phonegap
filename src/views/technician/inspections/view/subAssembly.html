<div class="segmented-control">
    <a class="control-item active" data-target="#test" data-group="header">
        Test
    </a>
    <a class="control-item" data-target="#comments" data-group="header">
        Comments
    </a>
    <a class="control-item" data-target="#photos" data-group="header">
        Photos
    </a>
</div>

<div id="test" class="control-content active" data-group="header">
    <div ng-if="subAssembly.subAssembly.machineGeneral == true">
        <h4 class="text-center m-t">Machine General Status</h4>

        <div class="segmented-control">
            <a class="control-item" data-target="#test-machineGeneral-ok" data-group="test-machineGeneral"
               ng-click="subAssembly.machineGeneralTest.actionItem.status = 'OK'"
               ng-class="{true: 'active'}[subAssembly.machineGeneralTest.actionItem.status == null || subAssembly.machineGeneralTest.actionItem.status == 'OK']">
                OK
            </a>
            <a class="control-item" data-target="#test-machineGeneral-warning" data-group="test-machineGeneral"
               ng-click="subAssembly.machineGeneralTest.actionItem.status = 'WARNING'"
               ng-class="{true: 'active'}[subAssembly.machineGeneralTest.actionItem.status == 'WARNING']">
                Warning
            </a>
            <a class="control-item" data-target="#test-machineGeneral-action" data-group="test-machineGeneral"
               ng-click="subAssembly.machineGeneralTest.actionItem.status = 'ACTION'"
               ng-class="{true: 'active'}[subAssembly.machineGeneralTest.actionItem.status == 'ACTION']">
                Action
            </a>
        </div>

        <div class="card">
            <div id="test-machineGeneral-ok" class="control-content" data-group="test-machineGeneral"
                 ng-class="{true: 'active'}[subAssembly.machineGeneralTest.actionItem.status == null || subAssembly.machineGeneralTest.actionItem.status == 'OK']">
                <p class="text-center m-t-sm">No further action required.</p>
            </div>
            <div id="test-machineGeneral-warning" class="control-content" data-group="test-machineGeneral"
                 ng-class="{true: 'active'}[subAssembly.machineGeneralTest.actionItem.status == 'WARNING']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="subAssembly.machineGeneralTest.actionItem.issue"
                               placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="subAssembly.machineGeneralTest.actionItem.action"
                               placeholder="Action to be taken">
                    </div>
                </form>
            </div>
            <div id="test-machineGeneral-action" class="control-content" data-group="test-machineGeneral"
                 ng-class="{true: 'active'}[subAssembly.machineGeneralTest.actionItem.status == 'ACTION']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="subAssembly.machineGeneralTest.actionItem.issue"
                               placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="subAssembly.machineGeneralTest.actionItem.action"
                               placeholder="Action to be taken">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.oil == true">
        <h4 class="text-center m-t">Oil Test</h4>

        <div class="card">
            <form class="input-group">
                <div class="input-row">
                    <label>Lead</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.lead" placeholder="Lead">
                </div>

                <div class="input-row">
                    <label>Copper</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.copper" placeholder="Copper">
                </div>

                <div class="input-row">
                    <label>Tin</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.tin" placeholder="Tin">
                </div>

                <div class="input-row">
                    <label>Iron</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.iron" placeholder="Iron">
                </div>

                <div class="input-row">
                    <label>PQ90</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.pq90" placeholder="PQ90">
                </div>

                <div class="input-row">
                    <label>Silicon</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.silicon" placeholder="Silicon">
                </div>

                <div class="input-row">
                    <label>Sodium</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.sodium" placeholder="Sodium">
                </div>

                <div class="input-row">
                    <label>Aluminium</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.aluminium" placeholder="Aluminium">
                </div>

                <div class="input-row">
                    <label>Water</label>
                    <input type="number" ng-model="oil.water" placeholder="Water">
                </div>

                <div class="input-row">
                    <label>Viscosity</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.viscosity" placeholder="Viscosity">
                </div>
            </form>
        </div>

        <h4 class="text-center m-t">Oil Status</h4>

        <div class="segmented-control">
            <a class="control-item" data-target="#test-oil-ok" data-group="test-oil"
               ng-click="subAssembly.oilTest.actionItem.status = 'OK'"
               ng-class="{true: 'active'}[subAssembly.oilTest.actionItem.status == null || subAssembly.oilTest.actionItem.status == 'OK']">
                OK
            </a>
            <a class="control-item" data-target="#test-oil-warning" data-group="test-oil"
               ng-click="subAssembly.oilTest.actionItem.status = 'WARNING'"
               ng-class="{true: 'active'}[subAssembly.oilTest.actionItem.status == 'WARNING']">
                Warning
            </a>
            <a class="control-item" data-target="#test-oil-action" data-group="test-oil"
               ng-click="subAssembly.oilTest.actionItem.status = 'ACTION'"
               ng-class="{true: 'active'}[subAssembly.oilTest.actionItem.status == 'ACTION']">
                Action
            </a>
        </div>

        <div class="card">
            <div id="test-oil-ok" class="control-content" data-group="test-oil"
                 ng-class="{true: 'active'}[subAssembly.oilTest.actionItem.status == null || subAssembly.oilTest.actionItem.status == 'OK']">
                <p class="text-center m-t-sm">No further action required.</p>
            </div>
            <div id="test-oil-warning" class="control-content" data-group="test-oil"
                 ng-class="{true: 'active'}[subAssembly.oilTest.actionItem.status == 'WARNING']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="subAssembly.oilTest.actionItem.issue"
                               placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="subAssembly.oilTest.actionItem.action"
                               placeholder="Action to be taken">
                    </div>
                </form>
            </div>
            <div id="test-oil-action" class="control-content" data-group="test-oil"
                 ng-class="{true: 'active'}[subAssembly.oilTest.actionItem.status == 'ACTION']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="subAssembly.oilTest.actionItem.issue"
                               placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="subAssembly.oilTest.actionItem.action"
                               placeholder="Action to be taken">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.wear == true">
        <h4 class="text-center m-t">Wear Test</h4>

        <div class="card">
            <form class="input-group">
                <div class="input-row">
                    <label>SMU</label>
                    <input type="text" pattern="[0-9]*" ng-model="subAssembly.wearTest.smu" placeholder="SMU">
                </div>

                <div class="input-row" ng-repeat="uniqueDetails in subAssembly.subAssembly.uniqueDetails">
                    <label>{{ uniqueDetails }}</label>
                    <input type="text" ng-model="subAssembly.wearTest.uniqueDetails[$index]"
                           placeholder="{{ uniqueDetails }}">
                </div>
            </form>
        </div>

        <h4 class="text-center m-t">Wear Status</h4>

        <div class="segmented-control">
            <a class="control-item" data-target="#test-wear-ok" data-group="test-wear"
               ng-click="subAssembly.wearTest.actionItem.status == 'OK'"
               ng-class="{true: 'active'}[subAssembly.wearTest.actionItem.status == null || subAssembly.wearTest.actionItem.status == 'OK']">
                OK
            </a>
            <a class="control-item" data-target="#test-wear-warning" data-group="test-wear"
               ng-click="subAssembly.wearTest.actionItem.status == 'WARNING'"
               ng-class="{true: 'active'}[subAssembly.wearTest.actionItem.status == 'WARNING']">
                Warning
            </a>
            <a class="control-item" data-target="#test-wear-action" data-group="test-wear"
               ng-click="subAssembly.wearTest.actionItem.status == 'ACTION'"
               ng-class="{true: 'active'}[subAssembly.wearTest.actionItem.status == 'ACTION']">
                Action
            </a>
        </div>

        <div class="card">
            <div id="test-wear-ok" class="control-content" data-group="test-wear"
                 ng-class="{true: 'active'}[subAssembly.wearTest.actionItem.status == null || subAssembly.wearTest.actionItem.status == 'OK']">
                <p class="text-center m-t-sm">No further action required.</p>
            </div>
            <div id="test-wear-warning" class="control-content" data-group="test-wear"
                 ng-class="{true: 'active'}[subAssembly.wearTest.actionItem.status == 'WARNING']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="subAssembly.wearTest.actionItem.issue"
                               placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="subAssembly.wearTest.actionItem.action"
                               placeholder="Action to be taken">
                    </div>
                </form>
            </div>
            <div id="test-wear-action" class="control-content" data-group="test-wear"
                 ng-class="{true: 'active'}[subAssembly.wearTest.actionItem.status == 'ACTION']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="subAssembly.wearTest.actionItem.issue"
                               placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="subAssembly.wearTest.actionItem.action"
                               placeholder="Action to be taken">
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div id="comments" class="control-content" data-group="header">
    <p class="content-padded text-center">Comments are not required, but allow you to pass on further information to the
        Domain Expert.</p>

    <div ng-if="subAssembly.subAssembly.machineGeneral != false">
        <h4 class="text-center m-t">Machine General Test</h4>

        <div class="content-padded">
            <form class="form-group">
                <textarea class="m-b-none" rows="3" ng-model="comments.machineGeneral" placeholder="Comment"></textarea>

                <button type="button" class="btn btn-primary btn-block" ng-click="addComment('machineGeneral')">
                    <i class="fa fa-plus"></i>
                    Add Comment
                </button>
            </form>
        </div>

        <div class="card" ng-if="subAssembly.machineGeneralTest.comments.length > 0">
            <ul class="table-view">
                <li class="table-view-cell media" ng-repeat="comment in subAssembly.machineGeneralTest.comments">
                    <img class="media-object pull-left" ng-src="data:image/jpeg;base64,{{ getAuthorPhoto(comment) }}">
                    <div class="media-body">
                        {{ comment.author.name }}<br/>
                        <small>
                            {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}
                        </small>
                        <br/>
                        <p>
                            {{ comment.text }}
                        </p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.oil != false">
        <h4 class="text-center m-t">Oil Test</h4>

        <div class="content-padded">
            <form class="form-group">
                <textarea class="m-b-none" rows="3" ng-model="comments.oil" placeholder="Comment"></textarea>

                <button type="button" class="btn btn-primary btn-block" ng-click="addComment('oil')">
                    <i class="fa fa-plus"></i>
                    Add Comment
                </button>
            </form>
        </div>

        <div class="card" ng-if="subAssembly.oilTest.comments.length > 0">
            <ul class="table-view">
                <li class="table-view-cell media" ng-repeat="comment in subAssembly.oilTest.comments">
                    <img class="media-object pull-left" ng-src="data:image/jpeg;base64,{{ getAuthorPhoto(comment) }}">
                    <div class="media-body">
                        {{ comment.author.name }}<br/>
                        <small>
                            {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}
                        </small>
                        <br/>
                        <p>
                            {{ comment.text }}
                        </p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.wear != false">
        <h4 class="text-center m-t">Wear Test</h4>

        <div class="content-padded">
            <form class="form-group">
                <textarea class="m-b-none" rows="3" ng-model="comments.wear" placeholder="Comment"></textarea>

                <button type="button" class="btn btn-primary btn-block" ng-click="addComment('wear')">
                    <i class="fa fa-plus"></i>
                    Add Comment
                </button>
            </form>
        </div>

        <div class="card" ng-if="subAssembly.wearTest.comments.length > 0">
            <ul class="table-view">
                <li class="table-view-cell media" ng-repeat="comment in subAssembly.wearTest.comments">
                    <img class="media-object pull-left" ng-src="data:image/jpeg;base64,{{ getAuthorPhoto(comment) }}">
                    <div class="media-body">
                        {{ comment.author.name }}<br/>
                        <small>
                            {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}
                        </small>
                        <br/>
                        <p>
                            {{ comment.text }}
                        </p>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

<div id="photos" class="control-content" data-group="header">
    <div ng-if="subAssembly.subAssembly.machineGeneral != false">
        <div class="content-padded">
            <button class="btn btn-negative btn-block" ng-click="takePhoto('machineGeneral')">
                <i class="fa fa-camera"></i>
                Take Photo
            </button>
        </div>

        <div class="card" ng-if="subAssembly.machineGeneralTest.photos.length > 0">
            <ul class="table-view">
                <li class="table-view-cell p-r" ng-repeat="picture in subAssembly.machineGeneralTest.photos">
                    <img class="img-responsive" ng-src="data:image/jpeg;base64,{{ picture.photo }}">
                </li>
            </ul>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.oil != false">
        <div class="content-padded">
            <button class="btn btn-negative btn-block" ng-click="takePhoto('oil')">
                <i class="fa fa-camera"></i>
                Take Photo
            </button>
        </div>

        <div class="card" ng-if="subAssembly.oilTest.photos.length > 0">
            <ul class="table-view">
                <li class="table-view-cell p-r" ng-repeat="picture in subAssembly.oilTest.photos">
                    <img class="img-responsive" ng-src="data:image/jpeg;base64,{{ picture.photo }}">
                </li>
            </ul>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.wear != false">
        <div class="content-padded">
            <button class="btn btn-negative btn-block" ng-click="takePhoto('wear')">
                <i class="fa fa-camera"></i>
                Take Photo
            </button>
        </div>

        <div class="card" ng-if="subAssembly.wearTest.photos.length > 0">
            <ul class="table-view">
                <li class="table-view-cell p-r" ng-repeat="picture in subAssembly.wearTest.photos">
                    <img class="img-responsive" ng-src="data:image/jpeg;base64,{{ picture.photo }}">
                </li>
            </ul>
        </div>
    </div>
</div>